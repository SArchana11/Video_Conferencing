{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Archana\\\\OneDrive\\\\Documents\\\\GNCIPL\\\\video-conferencing-app-master\\\\pages\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from \"next/head\";\nexport default function Home() {\n  _s();\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      peer = _React$useState2[0],\n      setPeer = _React$useState2[1];\n\n  var _React$useState3 = React.useState(\"\"),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      localId = _React$useState4[0],\n      setLocalId = _React$useState4[1];\n\n  var _React$useState5 = React.useState(\"\"),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      remoteId = _React$useState6[0],\n      setRemoteId = _React$useState6[1];\n\n  var _React$useState7 = React.useState(null),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      error = _React$useState8[0],\n      setError = _React$useState8[1];\n\n  var remoteVideoRef = React.useRef(null);\n  var localVideoRef = React.useRef(null);\n  var buttonIsDisabled = remoteId === \"\";\n\n  function call() {\n    return _call.apply(this, arguments);\n  }\n\n  function _call() {\n    _call = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var mediaStream, conn, _call2;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n              _context2.prev = 1;\n              _context2.next = 4;\n              return navigator.mediaDevices.getUserMedia({\n                audio: true,\n                video: true\n              });\n\n            case 4:\n              mediaStream = _context2.sent;\n\n              if (\"srcObject\" in localVideoRef.current) {\n                localVideoRef.current.srcObject = mediaStream;\n              } else {\n                // Avoid using this in new browsers, as it is going away.\n                localVideoRef.current.src = URL.createObjectURL(mediaStream);\n              }\n\n              conn = peer.connect(remoteId);\n              _call2 = peer.call(remoteId, mediaStream);\n              conn.on(\"open\", function () {\n                conn.send(localId);\n              });\n\n              _call2.on(\"stream\", function (remoteStream) {\n                if (\"srcObject\" in remoteVideoRef.current) {\n                  remoteVideoRef.current.srcObject = remoteStream;\n                } else {\n                  // Avoid using this in new browsers, as it is going away.\n                  remoteVideoRef.current.src = URL.createObjectURL(remoteStream);\n                }\n              });\n\n              _context2.next = 15;\n              break;\n\n            case 12:\n              _context2.prev = 12;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.log(\"Failed to get local stream\", _context2.t0);\n\n            case 15:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 12]]);\n    }));\n    return _call.apply(this, arguments);\n  }\n\n  React.useEffect(function () {\n    if (peer) return;\n\n    var _peer = new Peer();\n\n    _peer.on(\"open\", function (id) {\n      console.log(\"My peer ID is: \".concat(id));\n      setPeer(_peer);\n      setLocalId(id);\n    });\n  });\n  React.useEffect(function () {\n    if (!peer) return;\n    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n    peer.on(\"call\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(call) {\n        var mediaStream;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return navigator.mediaDevices.getUserMedia({\n                  audio: true,\n                  video: true\n                });\n\n              case 3:\n                mediaStream = _context.sent;\n\n                if (\"srcObject\" in localVideoRef.current) {\n                  localVideoRef.current.srcObject = mediaStream;\n                } else {\n                  // Avoid using this in new browsers, as it is going away.\n                  localVideoRef.current.src = URL.createObjectURL(mediaStream);\n                } // Answer the call with an A/V stream.\n\n\n                call.answer(mediaStream);\n                call.on(\"stream\", function (remoteStream) {\n                  if (\"srcObject\" in remoteVideoRef.current) {\n                    remoteVideoRef.current.srcObject = remoteStream;\n                  } else {\n                    // Avoid using this in new browsers, as it is going away.\n                    remoteVideoRef.current.src = URL.createObjectURL(remoteStream);\n                  }\n                });\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(\"Failed to get local stream\", _context.t0);\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 9]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    peer.on(\"connection\", function (conn) {\n      console.log(\"Connected\");\n      conn.on(\"data\", function (emisorID) {\n        console.log(emisorID);\n      });\n    });\n    peer.on(\"error\", function (err) {\n      setError(err.message);\n    });\n  }, [peer, localVideoRef, remoteVideoRef]);\n  return __jsx(React.Fragment, null, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }, __jsx(\"link\", {\n    href: \"https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css\",\n    rel: \"stylesheet\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }), __jsx(\"script\", {\n    src: \"https://unpkg.com/peerjs@1.2.0/dist/peerjs.min.js\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  })), __jsx(\"main\", {\n    className: \"container mx-auto px-5 flex flex-col items-center my-20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }, __jsx(\"h1\", {\n    className: \"font-bold text-2xl mb-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, \"Video conferencing app\"), __jsx(\"p\", {\n    className: \"mb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, \"Your peer ID: \", __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 25\n    }\n  }, localId ? localId : \"Loading...\")), __jsx(\"div\", {\n    className: \"mb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, __jsx(\"input\", {\n    className: \"border py-2 px-4 rounded mr-1\",\n    type: \"text\",\n    onChange: function onChange(e) {\n      return setRemoteId(e.target.value);\n    },\n    placeholder: \"Friend's peer ID\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }), __jsx(\"button\", {\n    className: [\"bg-black text-white py-2 px-4 rounded font-bold\", buttonIsDisabled && \"opacity-25\"].join(\" \"),\n    disabled: buttonIsDisabled,\n    onClick: call,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, \"Call\")), __jsx(\"p\", {\n    className: \"text-red-500 mb-20 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, error && error), __jsx(\"div\", {\n    className: \"grid grid-cols-2 gap-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, __jsx(\"video\", {\n    ref: remoteVideoRef,\n    className: \"border\",\n    volume: \"true\",\n    autoPlay: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  }), __jsx(\"video\", {\n    ref: localVideoRef,\n    className: \"border\",\n    autoPlay: true,\n    muted: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  }))));\n}\n\n_s(Home, \"Tq7WNYi2Oo8isRDL94RfABGmRsU=\");\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["C:/Users/Archana/OneDrive/Documents/GNCIPL/video-conferencing-app-master/pages/index.js"],"names":["Head","Home","React","useState","peer","setPeer","localId","setLocalId","remoteId","setRemoteId","error","setError","remoteVideoRef","useRef","localVideoRef","buttonIsDisabled","call","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","mediaDevices","audio","video","mediaStream","current","srcObject","src","URL","createObjectURL","conn","connect","on","send","remoteStream","console","log","useEffect","_peer","Peer","id","answer","emisorID","err","message","e","target","value","join"],"mappings":"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","sourcesContent":["import Head from \"next/head\";\n\nexport default function Home() {\n  const [peer, setPeer] = React.useState(null);\n  const [localId, setLocalId] = React.useState(\"\");\n  const [remoteId, setRemoteId] = React.useState(\"\");\n  const [error, setError] = React.useState(null);\n  const remoteVideoRef = React.useRef(null);\n  const localVideoRef = React.useRef(null);\n\n  const buttonIsDisabled = remoteId === \"\";\n\n  async function call() {\n    navigator.getUserMedia =\n      navigator.getUserMedia ||\n      navigator.webkitGetUserMedia ||\n      navigator.mozGetUserMedia;\n\n    try {\n      const mediaStream = await navigator.mediaDevices.getUserMedia({\n        audio: true,\n        video: true,\n      });\n\n      if (\"srcObject\" in localVideoRef.current) {\n        localVideoRef.current.srcObject = mediaStream;\n      } else {\n        // Avoid using this in new browsers, as it is going away.\n        localVideoRef.current.src = URL.createObjectURL(mediaStream);\n      }\n\n      const conn = peer.connect(remoteId);\n      const call = peer.call(remoteId, mediaStream);\n\n      conn.on(\"open\", function () {\n        conn.send(localId);\n      });\n\n      call.on(\"stream\", function (remoteStream) {\n        if (\"srcObject\" in remoteVideoRef.current) {\n          remoteVideoRef.current.srcObject = remoteStream;\n        } else {\n          // Avoid using this in new browsers, as it is going away.\n          remoteVideoRef.current.src = URL.createObjectURL(remoteStream);\n        }\n      });\n    } catch (error) {\n      console.log(\"Failed to get local stream\", error);\n    }\n  }\n\n  React.useEffect(() => {\n    if (peer) return;\n\n    let _peer = new Peer();\n\n    _peer.on(\"open\", function (id) {\n      console.log(`My peer ID is: ${id}`);\n      setPeer(_peer);\n      setLocalId(id);\n    });\n  });\n\n  React.useEffect(() => {\n    if (!peer) return;\n\n    navigator.getUserMedia =\n      navigator.getUserMedia ||\n      navigator.webkitGetUserMedia ||\n      navigator.mozGetUserMedia;\n\n    peer.on(\"call\", async function (call) {\n      try {\n        const mediaStream = await navigator.mediaDevices.getUserMedia({\n          audio: true,\n          video: true,\n        });\n\n        if (\"srcObject\" in localVideoRef.current) {\n          localVideoRef.current.srcObject = mediaStream;\n        } else {\n          // Avoid using this in new browsers, as it is going away.\n          localVideoRef.current.src = URL.createObjectURL(mediaStream);\n        }\n\n        // Answer the call with an A/V stream.\n        call.answer(mediaStream);\n\n        call.on(\"stream\", function (remoteStream) {\n          if (\"srcObject\" in remoteVideoRef.current) {\n            remoteVideoRef.current.srcObject = remoteStream;\n          } else {\n            // Avoid using this in new browsers, as it is going away.\n            remoteVideoRef.current.src = URL.createObjectURL(remoteStream);\n          }\n        });\n      } catch (error) {\n        console.log(\"Failed to get local stream\", error);\n      }\n    });\n\n    peer.on(\"connection\", function (conn) {\n      console.log(\"Connected\");\n\n      conn.on(\"data\", function (emisorID) {\n        console.log(emisorID);\n      });\n    });\n\n    peer.on(\"error\", function (err) {\n      setError(err.message);\n    });\n  }, [peer, localVideoRef, remoteVideoRef]);\n\n  return (\n    <>\n      <Head>\n        <link\n          href=\"https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css\"\n          rel=\"stylesheet\"\n        />\n        <script src=\"https://unpkg.com/peerjs@1.2.0/dist/peerjs.min.js\"></script>\n      </Head>\n      <main className=\"container mx-auto px-5 flex flex-col items-center my-20\">\n        <h1 className=\"font-bold text-2xl mb-10\">Video conferencing app</h1>\n\n        <p className=\"mb-5\">\n          Your peer ID: <b>{localId ? localId : \"Loading...\"}</b>\n        </p>\n\n        <div className=\"mb-5\">\n          <input\n            className=\"border py-2 px-4 rounded mr-1\"\n            type=\"text\"\n            onChange={(e) => setRemoteId(e.target.value)}\n            placeholder=\"Friend's peer ID\"\n          />\n          <button\n            className={[\n              \"bg-black text-white py-2 px-4 rounded font-bold\",\n              buttonIsDisabled && \"opacity-25\",\n            ].join(\" \")}\n            disabled={buttonIsDisabled}\n            onClick={call}\n          >\n            Call\n          </button>\n        </div>\n\n        <p className=\"text-red-500 mb-20 text-center\">{error && error}</p>\n\n        <div className=\"grid grid-cols-2 gap-1\">\n          <video\n            ref={remoteVideoRef}\n            className=\"border\"\n            volume=\"true\"\n            autoPlay\n          ></video>\n          <video ref={localVideoRef} className=\"border\" autoPlay muted></video>\n        </div>\n      </main>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}